# 状态码

[HTTP1.1](https://tools.ietf.org/html/rfc2616)一共定义了如下的状态码，总共41个。

| 系列 | 含义 | 取值范围 | 个数 |
| --- | --- | --- | --- |
| 1xx | 信息 | 100-101 | 2个 |
| 2xx | 成功 | 200-206 | 7个 |
| 3xx | 重定向 | 300-307 | 8个 |
| 4xx | 客户端错误 | 400-417 | 18个 |
| 5xx | 服务端错误 | 500-505 | 6个 |

>如果你想完全符合http1.1协议, 最好不要使用422等其他协议规范中定义的状态吗。

大部分RESTful风格的API并不需要使用这么多的状态码。

WEB服务器或框架会帮助我们处理一部分，但服务端和客户端都有相应的实现成本。

因此需要根据实际需求情况挑选一部分，而正因为没有实现全部，你一定需要协议说明文档。

同时只靠HTTP的状态码是不足以描述清楚所有情况。

但是，使用标准化的状态码你至少会在以下几个方面收益。
1. 业界通用标准是成本很低的沟通手段。
2. 反应真实情况的WEB服务日志，让你的监控和统计会变的更加轻松愉快。
3. 程序设计上更容易分层抽象，你的模式化编程可以走的更顺畅。

下方列表为排除掉几乎用不到的那些状态码之后剩下的几个候选状态码。

整理过程中也发现不少可能非常有用的状态码，但是大多数都是可以通过基于版本的优雅升级，简明的协议文档来解决，毕竟绝大多数情况下RESTful API的使用是基于协商的，不管这种这种协商是双向的还是单向的。

| Code | 默认返回文本 | 说明 |
| --- | --- | --- |
| 200 | OK | 可以代表其他成功状态。 |
| 201 | Created | 注意区分这个“创建成功”和下一个202的“提交成功”。|
| 202 | Accepted | 异步或事件驱动方式的系统中非常有用。比如支付请求提交成功。 |
| 204 | No Content | 除了删除，其他情况一般都应该返回Body。|
| 302 | Found | 临时重定向，经常用来应对会话超时。但如果想遵守严格的http1.1协议，你应该使用307。 |
| 307 | Temporary Redirect | 见302 |
| 304 | Not Modified | 对于调用频率非常高，应用了服务端缓存技术的API来讲要使用此状态码告知客户端使用的是缓存中的数据。|
| 400 | Bad Request | 可以代表其他。见[异常详情](/pages/errors.md)。 |
| 401 | Unauthorized | 见[权限验证](/pages/auth.md)。 |
| 403 | Forbidden | 见[权限验证](/pages/auth.md)。 |
| 404 | Not found | 请求的资源不存在。 |
| 409 | Conflict | 资源冲突。|

**永远不要返回5XX，这是向所有客户端通知“我的架构方案很糟糕！我的服务运维能力极差！”**

**网络、CPU、内存、磁盘天然都有可能成为瓶颈。**

**WEB服务器配置，服务容器的配置，数据库的配置.....这一切都是你的工作。**

**只有对自身稳定性、性能瓶颈了解不够，监控和应对处理不到位才有可能让客户端得到5XX系列状态码。**

**返回5XX，你会被家人、朋友、同事、用户嫌弃！！！**

这些状态码会在[数据操作](pages/operations.md)中结合实际场景。
